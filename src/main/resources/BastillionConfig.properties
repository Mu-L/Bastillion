#
# Bastillion Configuration
#

# --- SSH Key Generation ---
# Set to true to regenerate and import system SSH keys at startup
resetApplicationSSHKey=false

# System SSH key type: rsa | ecdsa | ed25519 | (deprecated: dsa)
sshKeyType=ed25519

# SSH key length:
#   rsa=4096 | ecdsa=521 | ed25519=256 | (deprecated dsa=2048)
sshKeyLength=256

# Default SSH key type for user-generated keys
defaultUserKeyType=ed25519

# Allow users to choose key type during key generation
allowUserKeyTypeSelection=false

# System private and public key paths ? leave blank to auto-generate
privateKey=
publicKey=

# Default passphrase for generated SSH keys; leave blank for no passphrase
defaultSSHPassphrase=${randomPassphrase}

# Enable internal audit logging
enableInternalAudit=false

# Retention period for audit logs (days)
deleteAuditLogAfter=90

# --- SSH Session Settings ---
# Keep-alive interval (seconds)
serverAliveInterval=60

# WebSocket idle timeout (minutes); 0 = no timeout
websocketTimeout=0

# Enable SSH agent forwarding
agentForwarding=false

# Two-factor authentication (OTP): required | optional | disabled
oneTimePassword=optional

# Enable key management:
#   true  = Bastillion overwrites authorized_keys
#   false = Bastillion appends its key instead
keyManagementEnabled=true

# Force key generation for new users (true = users cannot upload public keys)
forceUserKeyGeneration=true

# Interval to refresh authorized_keys files (minutes); 0 = disabled
authKeysRefreshInterval=120

# --- Security & Access ---
# Password policy regex
passwordComplexityRegEx=((?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*()_=\\[\\]{};':"\\\\|\,.<>\\/?+-]).{8\,20})

# Password complexity error message
passwordComplexityMsg=Passwords must be 8?20 characters, with one digit, one lowercase, one uppercase, and one special character.

# Days before inactive user accounts expire; <=0 disables expiration
accountExpirationDays=-1

# HTTP header to identify client IP (e.g., X-FORWARDED-FOR)
clientIPHeader=

# External authentication module (e.g., ldap-ol, ldap-ad)
jaasModule=

# Default profile for LDAP-authenticated users
defaultProfileForLdap=

# Session timeout (minutes)
sessionTimeout=15

# --- Database Settings ---
dbUser=bastillion
dbPassword=
dbDriver=org.h2.Driver
dbConnectionURL=jdbc:h2:file:keydb/bastillion;CIPHER=AES;

# Connection pool configuration
maxActive=25
testOnBorrow=true
minIdle=2
maxWait=15000
